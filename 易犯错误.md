## 比较
```c
int a = -2;
unsigned int b = 1;
char c[32] = {0};
if (a < b)
{
  printf("no print\n");
}
if (a < sizeof(c))
{
  printf("no print\n");
}
```

## `-fPIE`和`__thread`

可能导致程序崩溃, 如静态库中使用了`__thread`, 主进程开启了`-fPIE`

**`-fPIE` (Position Independent Executable)**：

- 创建位置无关的可执行文件
- 代码和数据的地址在运行时确定
- 需要 `-pie` 选项链接

**`__thread` (Thread Local Storage)**：

- GCC/Clang 中的线程本地存储关键字
- 为每个线程创建独立的变量实例
- 在链接时需要确定 TLS 变量的偏移量

### 2. 潜在冲突

当静态库使用 `__thread` 变量而主程序使用 `-fPIE` 时，主要存在以下问题：

#### 地址计算问题

- 静态库编译时使用绝对地址计算 TLS 变量
- 主程序使用 `-fPIE` 时，所有地址都是相对的
- 链接器可能无法正确处理这种混合情况

#### TLS 访问模型不一致

- 非位置无关代码通常使用 `fs:` 或 `gs:` 寄存器直接访问 TLS
- 位置无关代码使用 `got` 间接访问 TLS
- 这种不一致会导致运行时访问错误

### 3. 具体崩溃原因

#### 常见崩溃场景

1. **访问空指针**：TLS 变量地址计算错误，导致访问 NULL 指针
2. **段错误**：TLS 变量被放置在无效内存区域
3. **数据损坏**：多个线程访问同一个 TLS 变量副本
