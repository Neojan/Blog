
> C++ 经验之谈
尽量让 C++ 看起来像 C，除非必要，不要滥用高级特性。用智能指针，避免裸指针，尽量用标准库。你完全可以像写 C 一样写 C++，只在真正需要时再引入复杂特性。有人会问：“这难道不违背了 C++ 的初衷吗？那为什么不用 C 呢？”C++ 是 C 的超集，你可以写纯 C 代码在 C++ 中运行。C++ 给你更多功能，你可以按需使用，不必一开始就用所有特性。就像建木屋时，你可以先用木头盖屋顶，需要时再加金属屋顶一样。

# 侯捷C++学习

## 防御式编程

include：记得ifdef endif 防御式编程，防止头文件重复引用。

## 类构造

类构造函数，防止调用时候无法区分，如有默认值的构造和不带参数的构造。

## const

`const A *getPointer()`

此函数的返回类型为`const A * `类型。【const加在前】: 表示此函数的return类型是const类型。

`A *getPointer() const`

【const写在后】表示此函数是一个常函数，函数中只能作读取操作、不能作修改操作.

C++规定，对于一个常量的任何操作不能修改此常量，不管这个常量是什么类型，不管是否用函数修改，所以出于安全性的考虑，C++直接规定作用于常量的函数一定要是常函数，即大括号中不含修改操作，只能“get”一些东西。

表示此函数为常函数的方法是在函数大括号前加const关键字。

参数或返回值是否加上const取决于会不会被改变。

## 引用

reference：int& r=x，x和r的，sizeof，取地址，都一样，其实都是假象，内部实现都是指针。很少用做参数定义，多半用在参数传递

在此附上将指针转为引用的小技巧：`int *p = &a`, 我们将引用符号移到左边将 \*替换即可：`int &p = a`。

引用基本等于指针，修改会影响源值，不希望修改这加上const。尽量用引用，传参和返回值。考虑如果返回是局部的，则返回不能为引用。


## 运算符重载

运算符重载，设计成成员函数或者非成员函数都可以，比如+=写在成员函数里面，+写在非成员函数里。但比如<<不能作为成员函数，因为他的左边是ostream而不是自己定义的类，如果作为成员函数会有左值报错。

## friend

friend：可以访问类的私有成员

## Big 3 : 拷贝，虚构，赋值函数

拷贝赋值函数：需要检测自我赋值

## delete/new

`new array[],delete []`, `new, delete`

## 静态成员函数

static： 静态成员函数，不会有默认this。调用可以使用  **类名::函数名** 方式，也可以**具体对象.函数名**

## 面向对象3个重要点

### Composition复合

has-a 关系，一般通过实体引入，作为私有成员，用实心棱形表示，棱形指向引入者。等于组合关系。

### Delegation委托

一般通过指针引入，作为私有成员，用空心棱形表示，棱形指向引入者。指针引入 创建过程与实体引入不同步，指针在需要的时候才会使用（进行委托）。等于聚合关系。

pimp：point to impelecation。比如相同字符串，都指向一块空间，当需要修改时，可以copy on write, 即拷贝一份供修改

## Inheritance继承

is-a关系，空心三角形指向父类

委托+继承：如观察者模式，组合模式，都是这样

## virtual

virtual：虚函数，父类有自身定义，子类可以不必定义；

Pure virtual：纯虚函数，父类没有定义，子类必须定义

虚机制（动态绑定），多态：虚函数，虚表实现。1）调用指针，2）向上转型（猪到动物），3）调用虚函数
